version: '2'

services:

  Crawler:
    image: git.maifusha.com:5005/docker/scrapy:latest
    container_name: cangweizaixian_spider
    host_name: cangweizaixian_spider
    restart: always
    env_file: .env
    volumes:
      - .:/srv/crawl
    links:
      - Mysql
      - Redis

  Mysql:
    image: git.maifusha.com:5005/docker/mysql:latest
    container_name: mysql
    hostname: mysql
    restart: always
    env_file: .env
    ports:
      - '3306:3306'
    volumes:
      - /srv/mysql/data:/var/lib/mysql
      - ./database/initdb:/docker-entrypoint-initdb.d

  Redis:
    image: git.maifusha.com:5005/docker/redis:latest
    container_name: redis
    hostname: redis
    restart: always
    env_file: .env
    ports:
      - '6379:6379'
    volumes:
      - /srv/redis/data:/data
